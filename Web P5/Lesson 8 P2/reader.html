<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/v/bs5/jq-3.6.0/jszip-2.5.0/dt-1.13.1/af-2.5.1/b-2.3.2/b-colvis-2.3.2/b-html5-2.3.2/b-print-2.3.2/cr-1.6.1/date-1.2.0/fc-4.2.1/fh-3.3.1/kt-2.8.0/r-2.4.0/rg-1.3.0/rr-1.3.1/sc-2.0.7/sb-1.4.0/sp-2.1.0/sl-1.5.0/sr-1.2.0/datatables.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.2/chart.min.js" integrity="sha512-zjlf0U0eJmSo1Le4/zcZI51ks5SjuQXkU0yOdsOBubjSmio9iCUp8XPLkEAADZNBdR9crRy3cniZ65LF2w8sRA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.datatables.net/v/bs5/jq-3.6.0/jszip-2.5.0/dt-1.13.1/af-2.5.1/b-2.3.2/b-colvis-2.3.2/b-html5-2.3.2/b-print-2.3.2/cr-1.6.1/date-1.2.0/fc-4.2.1/fh-3.3.1/kt-2.8.0/r-2.4.0/rg-1.3.0/rr-1.3.1/sc-2.0.7/sb-1.4.0/sp-2.1.0/sl-1.5.0/sr-1.2.0/datatables.min.js"
    ></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"
    ></script>
    <script src="jquery-3.6.0.min.js"></script>
    <title>Lesson 8</title>
</head>
<body>
    <div class="container text-center">
        <div class="row">
            <div class="col">
                <canvas id="pie1"></canvas>
            </div>
            <div class="col">
                <canvas id="pie2"></canvas>
            </div>
        </div>
        <div class="row">
            <div class="col"></div>
        </div>
    </div>
    <script>
        $(document).ready(function(){
            var columns = [];
            var rows = [];
            var newArray = []   
            $.ajax({
                url: "2021_HKDSE_results_statistics_table3a_en.csv",
                success: function (result) {
                    $("#div1").html(result);
                    const array = result.split("\r\n");
                    for (let i=0; i<array.length; i++){
                        newArray.push(array[i].split(","));
                    }
                    console.log(newArray)
                    const data1 = {
                        labels: ["Day school candidates", "Non Day school candidates"],
                        datasets:[
                            {
                                label: "Dataset 1",
                                data: [newArray[1][5], newArray[1][8]],
                                backgroundColor: [
                                'rgb(255, 99, 132)',
                                'rgb(54, 162, 235)',
                                ],
                                hoverOffset: 4,
                        }
                    ]}
                    const data2 = {
                        labels: ["Male candidates", "Female candidates"],
                        datasets:[
                            {
                                label: "Dataset 2",
                                data: [newArray[1][6], newArray[1][7]],
                                backgroundColor: [
                                'rgb(255, 99, 132)',
                                'rgb(54, 162, 235)',
                                ],
                                hoverOffset: 4,
                        }
                    ]}
                    const config = {
                        type: 'pie',
                        data: data1,
                        options: {
                        responsive: true,
                        plugins: {
                            legend: {
                            position: 'top',
                            },
                            title: {
                            display: true,
                            text: 'Day School Candidate',
                            padding: {
                                top: 10,
                                bottom: 30
                            }
                            }
                            
                         }
                    }};
                    const config2 = {
                        type: 'pie',
                        data: data2,
                        options: {
                        responsive: true,
                        plugins: {
                            legend: {
                            position: 'top',
                            },
                            title: {
                            display: true,
                            text: 'Gender of candidate',
                            padding: {
                                top: 10,
                                bottom: 30
                            }
                            }
                         }
                    }};
                    const myChart = new Chart(
                        document.getElementById("pie1").getContext('2d'),
                        config
                        
                    );
                    const myChart2 = new Chart(
                        document.getElementById("pie2").getContext('2d'),
                        config2
                    );
                }
            });
        });
    </script>
</body>
</html>